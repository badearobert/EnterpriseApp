<!DOCTYPE html>
<html>
<head>
  <title>Items</title>
</head>
<body>
  <h1>Lista Items</h1>
  <ul id="items-list"></ul>

  <input type="text" id="item-name" placeholder="Nume item">
  <button onclick="addItem()">Adauga Item</button>
  <button onclick="deleteLastItem()">Sterge Ultimul Item</button>

  <script>
    async function fetchItems() {
      const res = await fetch('http://localhost:5000/items');
      const data = await res.json();
      const list = document.getElementById('items-list');
      list.innerHTML = '';
      data.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.id} - ${item.name}`;
        list.appendChild(li);
      });
    }

    async function addItem() {
      const name = document.getElementById('item-name').value || 'no_name';
      await fetch('http://localhost:5000/items', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name})
      });
      document.getElementById('item-name').value = '';
      await fetchItems();
    }

    async function deleteLastItem() {
      const res = await fetch('http://localhost:5000/items');
      const data = await res.json();
      if (data.length === 0) {
        alert('Nimic de sters!');
        return;
      }
      const lastId = data[data.length - 1].id;
      await fetch(`http://localhost:5000/items/${lastId}`, { method: 'DELETE' });
      await fetchItems();
    }
    fetchItems();
  </script>
</body>
</html>
